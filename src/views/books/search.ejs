<h1>Search for books</h1>

<form class="form" action="./books/search" method="get">
  <div class="form-group">
    <label class="form-label" for="subject">
      Filter by subject:
    </label>
    <input type="text" class="form-control"  id="subject" name="subject" placeholder="Enter a subject" required autocomplete="off" maxlength="100" autofocus/>
  </div>

  <div class="form-group">
    <label class="form-label" for="author">Search by Author (optional):</label>
    <input type="text" class="form-control" id="author" name="author" placeholder="Enter an author" autocomplete="off" maxlength="100"/>
  </div>

  <div class="form-group">
    <label class="form-label" for="title">Search by Title (optional):</label>
    <input type="text" class="form-control" id="title" name="title" placeholder="Enter a title" autocomplete="off" maxlength="200">
  </div>

  <div class="form-group">
    <label class="form-label" for="itemsPerPage">Items per page:</label>
    <select id="itemsPerPage" name="itemsPerPage" class="form-control form-select">
      <option value="3">3</option>
      <option value="5" selected>5</option>
      <option value="10">10</option>
    </select>
  </div>

  <div>
    <button type="submit" class="button">Search</button>
  </div>
</form>

<div id="book-list">
  <% if (typeof books !== 'undefined' && books.length > 0) { %>
      <h2>Books:</h2>
      <% books.forEach(function(book) { %>
        <div class="book">
          <h3 class="book-title"><%= book.title %></h3> 
          <p class="book-info">Author: <%= book.author %></p> 
          <p class="book-info">ISBN: <%= book.isbn %></p>
          <p class="book-info">Subject: <%= book.subject %></p>
          <p class="book-info">Price: <%= book.price %> $</p>
          <% if (typeof userId !== 'undefined' && userId) { %>
            <form class="form cart-form" method="post" action="./cart/add">
              <input type="hidden" name="isbn" value="<%= book.isbn %>"/>
              <input type="number" id="quantity-<%= book.isbn %>" class="quantity-input" name="quantity" min="1" max="100" value="1"/> <button class="button" type="submit">Add to cart</button>
            </form>
          <% } %>
        </div>
      <% }) %>
      <button class="button" type=""> Next page </button>
  <% } else if (typeof books !== 'undefined') { %>
      <p>No books found matching your criteria.</p>
  <% } %>
</div>